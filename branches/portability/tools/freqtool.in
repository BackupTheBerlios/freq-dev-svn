#!/bin/sh

prefix=@prefix@
freqstart=@datarootdir@/freq/start.py
getpid=@datarootdir@/freq/getpid.py
freqconf=@sysconfdir@/freq.conf
python=@PYTHON@
pid=`$python $getpid $freqconf`
frequser=freq

case "$1" in
  start)
	if (kill -0 "$pid" 2>/dev/null)
        then
        	echo "freQ is already running? PID: $pid."
                exit 1
        fi
        echo -n "Starting freQ: "
        $python $freqstart $freqconf >/dev/null 2>&1 &
        echo "done."
    ;;
  stop)
	if !(kill -0 "$pid" 2>/dev/null)
        then
        	echo "freQ is not running?"
                exit 1
        fi
        echo -n "Stopping freQ: "
        kill "$pid" 2>/dev/null
        sleep 1
        kill -9 "$pid" 2>/dev/null
        echo "done."
    ;;
  status)
	if (kill -0 "$pid" 2>/dev/null)
        then
        	echo "freQ is running with PID $pid."
        else
        	echo "freQ is not running."
        fi
    ;;
  *)
    echo "Usage: $0 {start|stop|status}" >&2
    exit 1
    ;;
esac

exit 0