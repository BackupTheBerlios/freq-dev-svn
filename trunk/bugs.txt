глюк с добавлением конфы в блеклист, находясь в конфе которую собрался добавить, пишу .blacklist_add конфа@conference.jabber.ru причина, получаю в ответ ошибку и предложение почитать лог ошибок.. после того как увел бота из конфы, спокойно добавил конфу в блеклист из ростера.. лог:

[31.01.08 23:26:51] [PID 3736] Traceback (most recent call last): File "src/kernel\freq.py", line 233, in call_cmd_handlers try: i[0](t, s, params) File "<string>", line 52, in blacklist_add NameError: global name 'reason' is not defined

второе... в конфе стоит акик по регулярным выражениям:

1) nick exp .*[<\^\}\{\]\[\#\%\=\+].*||спецсимволы фтопку
2) nick exp .*[~\!\?\»\«\$\?\€\?\?].*||спецсимволы фтопку
3) nick exp .*[?\¤\¦\§\©\?\¬\­\®\?].*||спецсимволы фтопку
4) nick exp .*[°\±\?\?\?\•\?\?\?\?].*||спецсимволы фтопку
5) nick exp .*[¶\?\`\'\"].*||спецсимволы фтопку
6) nick exp .*[l\?\?\?\?\?\?\?\™\–].*||спецсимволы фтопку
7) nick exp .*[—\?\?\?\?\o\o\:\|\>].*||спецсимволы фтопку

и авизитор:

nick exp .* (это для всех типа)

все входящие со спецсимволами в нике получают девойс.. но кика - нет... хотелось бы чтобы у кика был больший приоритет чем у авизитора...
или глюк в том что невозможно действие сразу авизитора и акика по регулярным выражениям?

а также.. хотелось бы чтобы нельзя было добавить один и тот же джид/ник сразу в несколько списков, тоесть либо в акик, либо в авизитор, либо в амодератор. тоесть при добавлении ника/джида сначала в акик, а потом в авизитор удяляло бы ник/джид из акика, итд...
так же и по регулярным выражениям, если они абсолютно идентичны.

еще глюк, случайно набрал .akick sow.. и акик лист очистился.. лог разговора с ботом:

[00:04:31]<Dominges> .akick sow
[00:04:33]<lambda> нет такого ника
[00:04:33]<lambda> добавлено
[00:04:34]<Dominges> .akick show
[00:04:39]<Dominges> .akick show
[00:04:42]<lambda> список пуст
[00:04:42]<lambda> список пуст


еще один глюк... с access lists... дано: админ, у которого джид занесен в access list в текущей конференции, с уровнем доступа 9.. глюк в следующем: этот админ понижает себя до мембера, а повысить назад - никак не может, бот отвечает фиг.. имхо, если у юзера есть постоянный доступ 9 в конфе, то он должен иметь право дать своему нику админа.. 

[15:52:14] <Dominges> .access_add dominges@jabbus.org 9
[15:52:15] <lambda> Dominges: сохранил
[15:52:37] <Domingus> .admin Domingus
[15:52:37] <lambda> Domingus: фиг
[15:52:44] <Domingus> .whoami
[15:52:44] <lambda> Domingus: none/participant
online()
зашел в конфу 01.02.08 12:52:19
уровень доступа: 9

Domingus - dominges@jabbus.org

точно так же если джид занесен в глобальный список доступа с уровнем доступа 9...



и еще, админ может спокойно дать юзеру уровень доступа в конфе 9, не тру.. админ раздает админов.. правда баг выше не позволит этому юзеру поднять себя до админа..


а так же неясный глюк... 


[00:04:12]<Dominges> lambda: .join блАбЛА@conference.jaBBer.ru
[00:04:24]<Dominges> .ping
[00:04:25]<lambda> Dominges: понг от тебя 0.25 секунды
[00:04:25]<public-lambda> Dominges: понг от тебя 0.30 секунды
[00:04:29]<Dominges> lambda: .join блАбЛА@conference.jaBBer.ru
[00:04:30]<lambda> Dominges: я уже сижу в той комнате... если это не так, то попросите админа бота дать команду .rejoin

в конфе блАбЛА@conference.jaBBer.ru:
[00:04:34]--- lambda занимает положение: владелец/модератор
[00:04:34]--- lambda вошёл(а) в комнату в качестве владелец/модератор и доступен для разговора (Type "help" to receive list of commands)
[00:04:34]--- Dominges занимает положение: нет/участник
[00:04:34]--- Dominges вошёл(а) в комнату в качестве нет/участник и давно отошёл от компьютера ([ASOT 287])
[00:04:50]<Dominges> .ping
[00:04:51]<lambda> Dominges: понг от блабла@conference.jabber.ru/Dominges 10.85 секунды
[00:05:23]<Dominges> .set_nick test
[00:05:24]<lambda> Dominges: фиг
[00:06:12]<Dominges> .whoami
[00:06:13]<lambda> Dominges: команда доступна только в конференции

в списке по команде .groupchats можно увидеть такое: блАбЛА@conference.jaBBer.ru(0) т.е конфа будет отображатся с 0 юзеров

такое поисходит если писать имя конфы в разном регистре.
а также, чтобы увести бота из блАбЛА@conference.jaBBer.ru, придется писать ".leave блАбЛА@conference.jaBBer.ru" в том же регистре.. лог разговора с ботом после .join блАбЛА@conference.jaBBer.ru:

[00:12:27]<Dominges> .leave блабла@conference.jabber.ru
[00:12:27]<lambda> меня нет там
[00:12:36]<Dominges> .leave блАбЛА@conference.jaBBer.ru
[00:12:36]<lambda> вышел из 'блАбЛА@conference.jaBBer.ru'


возможно баг.. если в конфиге изначально включены логи, то если дать боту команду .enable_logging, бот ответит логирование включено.. хотя оно и так было включено.. (не проверено)


все вышеприведенные глюки на r230

пожелания...
первое, бота часто приглашают в конфу, указывая в конце ника кучу пробелов: ".join example@conference.jabber.ru ник            ", хотелось бы чтобы все пробелы в конце ника обрезались...

второе, хотелось бы чтобы команды .access_add_global, .access_show_global, etc были доступны из ростера, и чтобы можно было человеку дать права 100 например, и он бы имел полный доступ как админ бота, из ростера в том числе (не только в конфах)... хотя, может и не нужно это?


недочет? у талисмана командой "тружид" (аналог .realjid) можно узнать реальный джид того, кто уже вышел из комнаты, у фрека же командой .realjid узнать джид того кто уже вышел не выйдет...



